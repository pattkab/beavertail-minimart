<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Beavertail Mini-Mart Order</title>

  <style>
    :root{
      --bg:#f6f7fb;
      --surface:#ffffff;
      --surface-2:#f0f2f8;
      --text:#111827;
      --muted:#6b7280;
      --border:rgba(17,24,39,.12);
      --shadow:0 10px 22px rgba(17,24,39,.08);
      --radius:16px;

      /* Brand */
      --brand:#7c3aed;   /* PURPLE */
      --brand-dark:#5b21b6;
      --ok:#059669;
      --danger:#dc2626;

      /* Header (purple) */
      --headerBg: linear-gradient(90deg, #5b21b6, #7c3aed, #a855f7);
      --headerBorder: rgba(255,255,255,.25);
      --headerText:#ffffff;

      /* Footer */
      --footerBg: linear-gradient(90deg, rgba(124,58,237,.14), rgba(5,150,105,.12));

      /* Selected card */
      --selectedBg: rgba(5,150,105,.10);
      --selectedBorder: rgba(5,150,105,.35);
      --selectedShadow: 0 12px 26px rgba(5,150,105,.14);
    }

    html[data-theme="dark"]{
      --bg:#0b1220;
      --surface:#0f1730;
      --surface-2:#101a33;
      --text:#e9eefc;
      --muted:#a9b3d6;
      --border:rgba(255,255,255,.14);
      --shadow:0 14px 34px rgba(0,0,0,.35);

      --brand:#a78bfa;
      --brand-dark:#6d28d9;

      --headerBg: linear-gradient(90deg, #4c1d95, #6d28d9, #8b5cf6);
      --headerBorder: rgba(255,255,255,.18);

      --selectedBg: rgba(46,229,157,.12);
      --selectedBorder: rgba(46,229,157,.38);
      --selectedShadow: 0 14px 30px rgba(46,229,157,.18);
    }

    *{ box-sizing:border-box; }
    html,body{ max-width:100%; overflow-x:hidden; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
    }

    /* ===== HEADER ===== */
    header{
      position:fixed; inset:0 0 auto 0;
      z-index:30;
      background:var(--headerBg);
      border-bottom:1px solid var(--headerBorder);
      box-shadow:0 10px 26px rgba(0,0,0,.18);
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:10px 14px;
    }

    .brandbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    h1{
      margin:0;
      font-size:16px;
      font-weight:900;
      color:var(--headerText);
      letter-spacing:.3px;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .iconbtn,
    .toggle{
      height:40px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.16);
      color:#fff;
      cursor:pointer;
      font-weight:900;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0 12px;
      box-shadow:0 8px 18px rgba(0,0,0,.18);
    }

    .toggle .dot{
      width:36px;height:22px;
      border-radius:999px;
      background:rgba(255,255,255,.25);
      position:relative;
      margin-left:6px;
    }
    .toggle .knob{
      position:absolute;
      top:2px;left:2px;
      width:18px;height:18px;
      border-radius:999px;
      background:#fff;
      transition:left .2s ease;
    }
    html[data-theme="dark"] .toggle .knob{ left:16px; }

    main{ padding:64px 0 140px; }

    /* ===== GRID ===== */
    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:14px;
    }
    @media(max-width:640px){
      .grid{ grid-template-columns:repeat(2,1fr); }
    }

    .card{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      transition:.15s;
    }
    .card.selected{
      background:var(--selectedBg);
      border-color:var(--selectedBorder);
      box-shadow:var(--selectedShadow);
    }

    .imgbox{
      height:128px;
      background:var(--surface-2);
      border-bottom:1px solid var(--border);
    }
    .imgbox img{
      width:100%;height:100%;
      object-fit:cover;
      display:block;
    }

    .content{
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      flex:1;
    }

    .row{
      display:flex;
      justify-content:space-between;
      gap:10px;
    }

    .name{ font-weight:900; }
    .price{ font-weight:900; }

    .meta{
      font-size:12px;
      color:var(--muted);
    }

    .qty{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:auto;
      gap:10px;
    }

    .stepper{
      display:flex;
      align-items:center;
      gap:8px;
      background:var(--surface-2);
      border:1px solid var(--border);
      border-radius:14px;
      padding:6px 8px;
    }

    .stepper button{
      width:30px;height:30px;
      border-radius:10px;
      border:1px solid var(--border);
      background:var(--surface);
      font-weight:900;
      cursor:pointer;
    }

    .btn{
      border:none;
      border-radius:12px;
      padding:10px 14px;
      font-weight:900;
      cursor:pointer;
      color:#fff;
      background:linear-gradient(180deg,var(--brand),var(--brand-dark));
    }

    .btn-danger{
      background:linear-gradient(180deg,#ef4444,#b91c1c);
    }

    .btn-ghost{
      background:var(--surface);
      color:var(--text);
      border:1px solid var(--border);
    }

    /* ===== FOOTER ===== */
    .bottom{
      position:fixed;
      inset:auto 0 0 0;
      z-index:20;
      background:var(--footerBg);
      backdrop-filter:blur(10px);
      border-top:1px solid var(--border);
    }

    .bottom .wrap{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    .badge{
      font-weight:900;
      background:var(--surface);
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
    }

    /* ===== MODALS ===== */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.5);
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding:14px;
      z-index:60;
    }

    .sheet{
      background:var(--surface);
      width:min(760px,100%);
      border-radius:22px;
      overflow:hidden;
      box-shadow:var(--shadow);
    }

    .orderbox{
      background:var(--surface-2);
      border:1px solid var(--border);
      border-radius:14px;
      padding:10px;
      max-height:40vh;
      overflow:auto;
      font-size:13px;
      white-space:pre-wrap;
    }
  </style>
</head>

<body>
<header>
  <div class="wrap brandbar">
    <h1>Beavertail Mini-Mart Order</h1>
    <div class="controls">
      <button class="iconbtn" id="openSearch">üîé</button>
      <div class="toggle" id="themeToggle">
        <span id="themeLabel">‚òÄÔ∏è</span>
        <span class="dot"><span class="knob"></span></span>
      </div>
    </div>
  </div>
</header>

<main>
  <div class="wrap">
    <div class="grid" id="productGrid"></div>
  </div>
</main>

<div class="bottom">
  <div class="wrap">
    <strong id="totalText">UGX 0</strong>
    <div>
      <span class="badge" id="itemsBadge">0 items</span>
      <button class="btn btn-danger" id="resetCart">Reset</button>
      <button class="btn" id="nextBtn">Next ‚Üí</button>
    </div>
  </div>
</div>

<script>
  /* JS LOGIC UNCHANGED FROM YOUR LAST VERSION */
</script>
</body>
</html>
